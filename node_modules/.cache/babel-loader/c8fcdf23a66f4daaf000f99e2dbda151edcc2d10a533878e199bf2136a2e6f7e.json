{"ast":null,"code":"var _jsxFileName = \"/Users/furb-x/Desktop/admin-panel-hadya/admin/src/page/Afitsant/Afitsant.jsx\",\n  _s2 = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./css.css\";\nimport { useReactToPrint } from \"react-to-print\";\nimport { ComponentToPrint } from \"./ComponentToPrint\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Afitsant() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [inventory, setInventory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isLoading, setIsLoading] = useState(null);\n\n  //printer\n  const Example = () => {\n    _s();\n    const componentRef = useRef();\n    const handlePrint = useReactToPrint({\n      content: () => componentRef.current\n    });\n\n    // toast message\n\n    const token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjIwMmFlOSIsImZ1bGxuYW1lIjoiQmVrem9kIiwicGhvbmUiOjk5ODkzOTA3NTM1MCwicGFzc3dvcmQiOiI4YzY5NzZlNWI1NDEwNDE1YmRlOTA4YmQ0ZGVlMTVkZmIxNjdhOWM4NzNmYzRiYjhhODFmNmYyYWI0NDhhOTE4IiwiYmFsYW5jZSI6MCwiYWN0aXZlIjowLCJyb2xlIjoiYWRtaW4iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMi0wMVQxNTo0MTozMC4wMDBaIiwidXBkYXRlZF9hdCI6bnVsbCwiaWF0IjoxNzA3MTYyMjgzLCJleHAiOjE3MDk3NTQyODN9.C23tcebnuYTWKjBl6Rylj_rWZPS3_I4eScnJHl-BzZc\"; // Tokeningizni bu yerga joylang\n\n    useEffect(() => {\n      const fetchData = async () => {\n        try {\n          const response = await axios.get(\"https://api.hadyacrm.uz/api/afitsant\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setInventory(response.data.innerData);\n          setLoading(false); // So'rov bajarildi, loadingni false qilamiz\n          setIsLoading(null);\n        } catch (error) {\n          console.error(\"Error fetching data:\", error);\n          setLoading(false); // Xatolik sodir bo'ldi, loadingni false qilamiz\n          setIsLoading(null);\n        }\n      };\n      fetchData();\n    }, [token]);\n    const active = async id => {\n      setIsLoading(id);\n      try {\n        await axios.patch(`https://api.hadyacrm.uz/api/afitsant/activate/${id}`, {}, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setInventory(inventory.map(inv => {\n          if ((inv === null || inv === void 0 ? void 0 : inv.id) === id) {\n            return {\n              ...inv,\n              active: inv.active === 0 ? 1 : 0\n            };\n          }\n          return inv;\n        }));\n        setIsLoading(null);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setIsLoading(null);\n      }\n    };\n    const deleteAfitsant = async id => {\n      setIsLoading(id);\n      try {\n        await axios.delete(`https://api.hadyacrm.uz/api/afitsant/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setInventory(inventory.filter(inv => (inv === null || inv === void 0 ? void 0 : inv.id) !== id));\n        setIsLoading(null);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setIsLoading(null);\n      }\n    };\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 12\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards\",\n      children: [/*#__PURE__*/_jsxDEV(ComponentToPrint, {\n        ref: componentRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 14\n      }, this), inventory.sort((a, b) => a.active - b.active).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `card ${item.id === isLoading ? \"loading\" : \"\"} `,\n        style: {\n          width: \"18rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: [\" ISMI:\", item.fullname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Xisobi: \", item.balance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Telefon: \", item.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              active(item.id);\n            },\n            style: item.active === 1 ? {\n              backgroundColor: \"green\"\n            } : {\n              backgroundColor: \"#bbb\"\n            },\n            className: \"btn btn-primary\",\n            disabled: isLoading,\n            children: item.active === 1 ? \"Active\" : \"Inactive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"delete\",\n            onClick: () => {\n              deleteAfitsant(item.id);\n            },\n            disabled: isLoading,\n            className: \"btn btn-danger\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePrint,\n            children: \"Print this out!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  };\n  _s(Example, \"5kYJY7lrT04UR+IBT/T8q5mVfT0=\", false, function () {\n    return [useReactToPrint];\n  });\n}\n_s2(Afitsant, \"0GA9Ww5KT93dkKePtQD2Aijrc60=\");\n_c = Afitsant;\nvar _c;\n$RefreshReg$(_c, \"Afitsant\");","map":{"version":3,"names":["axios","React","useState","useEffect","useRef","useReactToPrint","ComponentToPrint","jsxDEV","_jsxDEV","Afitsant","_s2","_s","$RefreshSig$","inventory","setInventory","loading","setLoading","isLoading","setIsLoading","Example","componentRef","handlePrint","content","current","token","fetchData","response","get","headers","Authorization","data","innerData","error","console","active","id","patch","map","inv","deleteAfitsant","delete","filter","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","sort","a","b","item","style","width","fullname","balance","phone","onClick","backgroundColor","disabled","_c","$RefreshReg$"],"sources":["/Users/furb-x/Desktop/admin-panel-hadya/admin/src/page/Afitsant/Afitsant.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./css.css\";\nimport { useReactToPrint } from \"react-to-print\";\n\nimport { ComponentToPrint } from \"./ComponentToPrint\";\n\n\nexport default function Afitsant() {\n  const [inventory, setInventory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [isLoading, setIsLoading] = useState(null);\n\n  //printer\nconst Example = () => {\n  const componentRef = useRef();\n  const handlePrint = useReactToPrint({\n    content: () => componentRef.current,\n  })\n\n  // toast message\n\n  const token =\n    \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjIwMmFlOSIsImZ1bGxuYW1lIjoiQmVrem9kIiwicGhvbmUiOjk5ODkzOTA3NTM1MCwicGFzc3dvcmQiOiI4YzY5NzZlNWI1NDEwNDE1YmRlOTA4YmQ0ZGVlMTVkZmIxNjdhOWM4NzNmYzRiYjhhODFmNmYyYWI0NDhhOTE4IiwiYmFsYW5jZSI6MCwiYWN0aXZlIjowLCJyb2xlIjoiYWRtaW4iLCJjcmVhdGVkX2F0IjoiMjAyNC0wMi0wMVQxNTo0MTozMC4wMDBaIiwidXBkYXRlZF9hdCI6bnVsbCwiaWF0IjoxNzA3MTYyMjgzLCJleHAiOjE3MDk3NTQyODN9.C23tcebnuYTWKjBl6Rylj_rWZPS3_I4eScnJHl-BzZc\"; // Tokeningizni bu yerga joylang\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\n          \"https://api.hadyacrm.uz/api/afitsant\",\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n        setInventory(response.data.innerData);\n        setLoading(false); // So'rov bajarildi, loadingni false qilamiz\n        setIsLoading(null);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        setLoading(false); // Xatolik sodir bo'ldi, loadingni false qilamiz\n        setIsLoading(null);\n      }\n    };\n\n    fetchData();\n  }, [token]);\n\n  const active = async (id) => {\n    setIsLoading(id);\n    try {\n      await axios.patch(\n        `https://api.hadyacrm.uz/api/afitsant/activate/${id}`,\n        {},\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      setInventory(\n        inventory.map((inv) => {\n          if (inv?.id === id) {\n            return { ...inv, active: inv.active === 0 ? 1 : 0 };\n          }\n          return inv;\n        })\n      );\n      setIsLoading(null);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      setIsLoading(null);\n    }\n  };\n\n  const deleteAfitsant = async (id) => {\n    setIsLoading(id);\n\n    try {\n      await axios.delete(`https://api.hadyacrm.uz/api/afitsant/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setInventory(inventory.filter((inv) => inv?.id !== id));\n      setIsLoading(null);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      setIsLoading(null);\n    }\n  };\n\n  if (loading) {\n    return <p>Loading...</p>;\n  }\n\n  return (\n    <div className=\"cards\">\n             <ComponentToPrint ref={componentRef} />\n\n      {inventory\n        .sort((a, b) => a.active - b.active)\n        .map((item) => (\n          <div\n            key={item.id}\n            className={`card ${item.id === isLoading ? \"loading\" : \"\"} `}\n            style={{ width: \"18rem\" }}\n          \n          >\n            <h5 className=\"card-title\"> ISMI:{item.fullname}</h5>\n            <p className=\"card-text\">Xisobi: {item.balance}</p>\n            <p className=\"card-text\">Telefon: {item.phone}</p>\n\n            <div className=\"btn\">\n              <button\n                onClick={() => {\n                  active(item.id);\n                }}\n                style={\n                  item.active === 1\n                    ? { backgroundColor: \"green\" }\n                    : { backgroundColor: \"#bbb\" }\n                }\n                className=\"btn btn-primary\"\n                disabled={isLoading}\n              >\n                {item.active === 1 ? \"Active\" : \"Inactive\"}\n              </button>\n\n              <button\n                id=\"delete\"\n                onClick={() => {\n                  deleteAfitsant(item.id);\n                }}\n                disabled={isLoading}\n                className=\"btn btn-danger\"\n              >\n                Delete\n              </button>\n      <button onClick={handlePrint}>Print this out!</button>\n\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}